(this["webpackJsonpreact-mesto-auth"]=this["webpackJsonpreact-mesto-auth"]||[]).push([[0],{29:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),c=n(20),s=n.n(c),i=n(8),r=(n(29),n(22)),u=n(2),l=n(3),p=n.p+"static/media/logo-white.03b78ada.svg",d=n(0);var _=function(e){return Object(d.jsxs)("div",{className:"header__user-status ".concat(e.isMenuOpen?"header__user-status_opened":""),children:[Object(d.jsx)("span",{className:"header__user-email",children:e.userData?e.userData.email:""}),Object(d.jsx)(i.b,{to:"/".concat(e.linkUrl),target:"_self",className:"header__link ".concat(e.classLink?e.classLink:""),onClick:e.onSignOut,children:e.linkName})]})};var b=function(e){return Object(d.jsxs)("header",{className:"header ".concat(e.isMenuOpen?"header_opened":""),children:[Object(d.jsx)("a",{href:"index.html",target:"_self",className:"logo",children:Object(d.jsx)("img",{src:p,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u041c\u0435\u0441\u0442\u043e",className:"header__logo"})}),Object(d.jsx)(_,{userData:e.userData,linkUrl:e.linkUrl,linkName:e.linkName,classLink:e.classLink,onSignOut:e.onSignOut,isMenuOpen:e.isMenuOpen}),Object(d.jsx)("button",{type:"button","aria-label":"\u041c\u0435\u043d\u044e \u043e\u0442\u043a\u0440\u044b\u0442\u044c",className:"button header__button-menu",onClick:e.onShowMenu}),Object(d.jsx)("button",{type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",className:"button header__button-close",onClick:e.onClose})]})},j=o.a.createContext();var m=function(e){var t=o.a.useContext(j),n=e.card.owner._id===t._id,a=e.card.likes.some((function(e){return e._id===t._id})),c="button card__like-button".concat(a?" card__like-button_active":""),s="button card__delete-button ".concat(n?"card__delete-button_visible":"card__delete-button_hidden");return Object(d.jsxs)("li",{className:"card",children:[Object(d.jsx)("img",{className:"card__image",src:e.card.link,alt:e.card.name,onClick:function(){e.onCardClick(e.card)}}),Object(d.jsx)("button",{type:"button","aria-label":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",className:s,onClick:function(){e.onConfirm(e.card)}}),Object(d.jsxs)("div",{className:"card__info",children:[Object(d.jsx)("h2",{className:"card__title",children:e.card.name}),Object(d.jsxs)("div",{className:"card__likes",children:[Object(d.jsx)("button",{type:"button","aria-label":"\u041b\u0430\u0439\u043a\u043d\u0443\u0442\u044c",className:c,onClick:function(){e.onCardLike(e.card)}}),Object(d.jsx)("span",{className:"card__like-counter","aria-label":"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043b\u0430\u0439\u043a\u043e\u0432",children:e.card.likes.length})]})]})]})};var h=function(e){var t=o.a.useContext(j);return Object(d.jsxs)("main",{children:[Object(d.jsxs)("section",{className:"profile",children:[Object(d.jsx)("div",{className:"profile__avatar-edit",onClick:e.onEditAvatar,style:{backgroundImage:"url(".concat(t?t.avatar:"",")")}}),Object(d.jsxs)("div",{className:"profile__about",children:[Object(d.jsx)("h1",{className:"profile__name",children:t?t.name:""}),Object(d.jsx)("p",{className:"profile__metier",children:t?t.about:""}),Object(d.jsx)("button",{type:"button","aria-label":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",className:"button profile__edit-button",onClick:e.onEditProfile})]}),Object(d.jsx)("button",{type:"button","aria-label":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",className:"button profile__add-button",onClick:e.onAddPlace})]}),Object(d.jsx)("section",{"aria-label":"\u041a\u0430\u0440\u0442\u043e\u0447\u043a\u0438 \u0441 \u043c\u0435\u0441\u0442\u0430\u043c\u0438",children:Object(d.jsx)("ul",{className:"cards",children:e.cards.map((function(t){return Object(d.jsx)(m,{card:t,onCardClick:e.onShowImage,onCardLike:e.onCardLike,onConfirm:e.onConfirm},t._id)}))})})]})};var f=function(){return Object(d.jsx)("footer",{className:"footer",children:Object(d.jsx)("p",{className:"footer__text",children:"\xa9\xa02020 Mesto Russia"})})};var O=function(e){return Object(d.jsx)("div",{className:"overlay popup popup_type_show-image".concat(e.card.link&&e.card.name?" popup_opened":""),onClick:function(t){t.target===t.currentTarget&&e.onClose()},children:Object(d.jsxs)("div",{className:"popup__container popup__container_type_show-image",children:[Object(d.jsx)("button",{type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",className:"button popup__close-button",onClick:e.onClose}),Object(d.jsxs)("figure",{className:"figure",children:[Object(d.jsx)("img",{src:e.card.link,alt:e.card.name,className:"figure__image"}),Object(d.jsx)("figcaption",{className:"figure__caption",children:e.card.name})]})]})})};var x=function(e){var t="popup__save-button ".concat(e.isDisabled?"popup__save-button_inactive":"");return Object(d.jsx)("div",{className:"overlay popup popup_type_".concat(e.name).concat(e.isOpen?" popup_opened":""),onMouseDown:function(t){t.target===t.currentTarget&&e.onClose()},children:Object(d.jsxs)("div",{className:"popup__container popup__container_type_".concat(e.name),children:[Object(d.jsx)("h2",{className:"popup__title",children:e.title}),Object(d.jsx)("button",{type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",className:"button popup__close-button",onClick:e.onClose}),Object(d.jsxs)("form",{className:"popup__form popup__form_type_".concat(e.name),name:e.name,onSubmit:e.onSubmit,children:[e.children,Object(d.jsx)("button",{type:"submit",className:t,disabled:e.isDisabled,children:e.buttonText})]})]})})};var g=function(e){var t=o.a.useState(""),n=Object(u.a)(t,2),c=n[0],s=n[1],i=o.a.useState(""),r=Object(u.a)(i,2),l=r[0],p=r[1],_=o.a.useState(!0),b=Object(u.a)(_,2),m=b[0],h=b[1],f=o.a.useContext(j);return Object(a.useEffect)((function(){s(f?f.name:""),p(f?f.about:"")}),[f,e.isOpen]),Object(a.useEffect)((function(){h(""===c||""===l)}),[c,l]),Object(d.jsxs)(x,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",name:"profile",buttonText:e.buttonText,isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onUpdateUser({name:c,about:l}),s(f.name),p(f.about)},isDisabled:m,children:[Object(d.jsxs)("label",{className:"popup__form-field",children:[Object(d.jsx)("input",{type:"text",value:c,onChange:function(e){s(e.target.value)},name:"input-name-profile",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",className:"popup__input popup__input_type_name-profile",id:"input-name-profile",required:!0,minLength:"2",maxLength:"40"}),Object(d.jsx)("span",{className:"popup__input-error input-name-profile-error"})]}),Object(d.jsxs)("label",{className:"popup__form-field",children:[Object(d.jsx)("input",{type:"text",value:l,onChange:function(e){p(e.target.value)},name:"input-metier-profile",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",className:"popup__input popup__input_type_metier-profile",id:"input-metier-profile",required:!0,minLength:"2",maxLength:"200"}),Object(d.jsx)("span",{className:"popup__input-error input-metier-profile-error"})]})]})};var v=function(e){var t=o.a.useRef();return Object(d.jsx)(x,{title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",name:"edit-avatar",buttonText:e.buttonText,isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(n){n.preventDefault(),e.onUpdateAvatar({avatar:t.current.value}),t.current.value=""},isDisabled:!1,children:Object(d.jsxs)("label",{className:"popup__form-field",children:[Object(d.jsx)("input",{type:"url",name:"input-link-edit-avatar",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0430\u0432\u0430\u0442\u0430\u0440\u043a\u0443",className:"popup__input popup__input_type_link-avatar",id:"input-link-edit-avatar",required:!0,ref:t}),Object(d.jsx)("span",{className:"popup__input-error input-link-edit-avatar-error"})]})})};var k=function(e){var t=o.a.useState(""),n=Object(u.a)(t,2),c=n[0],s=n[1],i=o.a.useState(""),r=Object(u.a)(i,2),l=r[0],p=r[1],_=o.a.useState(!0),b=Object(u.a)(_,2),j=b[0],m=b[1];return Object(a.useEffect)((function(){s(""),p("")}),[]),Object(a.useEffect)((function(){m(""===c||""===l)}),[c,l]),Object(d.jsxs)(x,{title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",name:"add-card",buttonText:e.buttonText,isOpen:e.isOpen,onClose:function(){e.onClose(),s(""),p("")},onSubmit:function(t){t.preventDefault(),e.onAddPlace({name:c,link:l}),s(""),p("")},isDisabled:j,children:[Object(d.jsxs)("label",{className:"popup__form-field",children:[Object(d.jsx)("input",{type:"text",value:c,onChange:function(e){s(e.target.value)},name:"input-name-add-card",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",className:"popup__input popup__input_type_name-card",id:"input-name-add-card",required:!0,minLength:"2",maxLength:"30"}),Object(d.jsx)("span",{className:"popup__input-error input-name-add-card-error"})]}),Object(d.jsxs)("label",{className:"popup__form-field",children:[Object(d.jsx)("input",{type:"url",value:l,onChange:function(e){p(e.target.value)},name:"input-link-add-card",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",className:"popup__input popup__input_type_link-card",id:"input-link-add-card",required:!0}),Object(d.jsx)("span",{className:"popup__input-error input-link-add-card-error"})]})]})};var N=function(e){return Object(d.jsx)(x,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",name:"confirm",buttonText:e.buttonText,isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onCardDelete(e.card)},isDisabled:!1})},C=n(13),y=n(14),S=new(function(){function e(t){Object(C.a)(this,e),this._url=t.baseUrl,this._headers=t.headers}return Object(y.a)(e,[{key:"getInitialCards",value:function(){return fetch("".concat(this._url,"/cards"),{headers:{authorization:this._headers.authorization}}).then(this._getResponseData)}},{key:"getUserInfo",value:function(){return fetch("".concat(this._url,"/users/me"),{headers:{authorization:this._headers.authorization}}).then(this._getResponseData)}},{key:"setUserAvatar",value:function(e){return fetch("".concat(this._url,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then(this._getResponseData)}},{key:"setUserInfo",value:function(e){return fetch("".concat(this._url,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.about})}).then(this._getResponseData)}},{key:"addCard",value:function(e){return fetch("".concat(this._url,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})}).then(this._getResponseData)}},{key:"deleteCard",value:function(e){return fetch("".concat(this._url,"/cards/").concat(e),{method:"DELETE",headers:{authorization:this._headers.authorization}}).then(this._getResponseData)}},{key:"addLike",value:function(e,t){return fetch("".concat(this._url,"/cards/likes/").concat(e),{method:"PUT",headers:this._headers,body:JSON.stringify({likes:t})}).then(this._getResponseData)}},{key:"deleteLike",value:function(e){return fetch("".concat(this._url,"/cards/likes/").concat(e),{method:"DELETE",headers:{authorization:this._headers.authorization}}).then(this._getResponseData)}},{key:"changeLikeCardStatus",value:function(e,t,n){return t?this.addLike(e,n):this.deleteLike(e)}},{key:"_getResponseData",value:function(e){return e.ok?e.json():Promise.reject(new Error("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(e.status)))}}]),e}())({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-22",headers:{authorization:"1e5f7c98-03ad-4c6e-8333-1ab219b8293f","Content-Type":"application/json"}});var D=function(e){var t=o.a.useState(""),n=Object(u.a)(t,2),c=n[0],s=n[1],i=o.a.useState(""),r=Object(u.a)(i,2),l=r[0],p=r[1],_=o.a.useState(!0),b=Object(u.a)(_,2),j=b[0],m=b[1],h="popup__save-button popup__save-button_type_".concat(e.name," ").concat(j?"popup__save-button_inactive":"");return Object(a.useEffect)((function(){s(""),p("")}),[]),Object(a.useEffect)((function(){m(""===c||""===l)}),[c,l]),Object(d.jsxs)("div",{className:"popup__container popup__container_type_".concat(e.name),children:[Object(d.jsx)("h2",{className:"popup__title popup__title_type_".concat(e.name),children:e.title}),Object(d.jsxs)("form",{className:"popup__form popup__form_type_".concat(e.name),name:e.name,noValidate:!0,onSubmit:function(t){t.preventDefault(),e.onLogin({email:c,password:l}),s(""),p("")},children:[Object(d.jsxs)("label",{className:"popup__form-field",children:[Object(d.jsx)("input",{type:"email",value:c,onChange:function(e){s(e.target.value)},name:"input-name-".concat(e.name),placeholder:"Email",className:"popup__input popup__input_type_".concat(e.name," popup__input_type_email-").concat(e.name),id:"input-email-".concat(e.name),required:!0}),Object(d.jsx)("span",{className:"popup__input-error input-email-".concat(e.name,"-error")})]}),Object(d.jsxs)("label",{className:"popup__form-field",children:[Object(d.jsx)("input",{type:"password",value:l,onChange:function(e){p(e.target.value)},name:"input-password-".concat(e.name),placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",className:"popup__input popup__input_type_".concat(e.name," popup__input_type_password-").concat(e.name),id:"input-password-".concat(e.name),required:!0}),Object(d.jsx)("span",{className:"popup__input-error input-password-".concat(e.name,"-error")})]}),Object(d.jsx)("button",{type:"submit",className:h,disabled:j,children:e.buttonText})]})]})};var T=function(e){var t=o.a.useState(""),n=Object(u.a)(t,2),c=n[0],s=n[1],r=o.a.useState(""),l=Object(u.a)(r,2),p=l[0],_=l[1],b=o.a.useState(!0),j=Object(u.a)(b,2),m=j[0],h=j[1],f="popup__save-button popup__save-button_type_login ".concat(m?"popup__save-button_inactive":"");return Object(a.useEffect)((function(){s(""),_("")}),[]),Object(a.useEffect)((function(){h(""===c||""===p)}),[c,p]),Object(d.jsxs)("div",{className:"popup__container popup__container_type_login",children:[Object(d.jsx)("h2",{className:"popup__title popup__title_type_login",children:e.title}),Object(d.jsxs)("form",{className:"popup__form popup__form_type_".concat(e.name),name:e.name,noValidate:!0,onSubmit:function(t){t.preventDefault(),e.onRegister({email:c,password:p}),s(""),_("")},children:[Object(d.jsxs)("label",{className:"popup__form-field",children:[Object(d.jsx)("input",{type:"email",value:c,onChange:function(e){s(e.target.value)},name:"input-name-".concat(e.name),placeholder:"Email",className:"popup__input popup__input_type_login popup__input_type_email-".concat(e.name),id:"input-email-".concat(e.name),required:!0}),Object(d.jsx)("span",{className:"popup__input-error input-email-".concat(e.name,"-error")})]}),Object(d.jsxs)("label",{className:"popup__form-field",children:[Object(d.jsx)("input",{type:"password",value:p,onChange:function(e){_(e.target.value)},name:"input-password-".concat(e.name),placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",className:"popup__input popup__input_type_login popup__input_type_password-".concat(e.name),id:"input-password-".concat(e.name),required:!0}),Object(d.jsx)("span",{className:"popup__input-error input-password-".concat(e.name,"-error")})]}),Object(d.jsx)("button",{type:"submit",className:f,disabled:m,children:e.buttonText})]}),Object(d.jsx)(i.b,{to:"/signin",className:"popup__link",onClick:e.onRegister,children:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? \u0412\u043e\u0439\u0442\u0438"})]})};var L=function(e){return Object(d.jsx)("div",{className:"overlay popup popup_type_info-tooltip".concat(e.statusData?" popup_opened":""),onClick:function(t){t.target===t.currentTarget&&e.onClose()},children:Object(d.jsxs)("div",{className:"popup__container popup__container_type_info-tooltip",children:[Object(d.jsx)("button",{type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",className:"button popup__close-button",onClick:e.onClose}),Object(d.jsx)("img",{src:e.statusData&&e.statusData.link,alt:e.statusData&&e.statusData.text,className:"popup__image popup__image_type_status"}),Object(d.jsx)("h2",{className:"popup__title popup__title_type_status",children:e.statusData&&e.statusData.text})]})})},w=n(23),E=n(24);var U=function(e){var t=e.component,n=e.headerComponent,a=e.mainComponent,o=e.footerComponent,c=e.userData,s=e.linkUrl,i=e.linkName,r=e.classLink,u=e.onSignOut,p=Object(E.a)(e,["component","headerComponent","mainComponent","footerComponent","userData","linkUrl","linkName","classLink","onSignOut"]);return Object(d.jsx)(l.b,{children:function(){return p.loggedIn?Object(d.jsxs)(t,{children:[Object(d.jsx)(n,{userData:c,linkUrl:s,linkName:i,classLink:r,onSignOut:u}),Object(d.jsx)(a,Object(w.a)({},p)),Object(d.jsx)(o,{})]}):Object(d.jsx)(l.a,{to:"./signin"})}})};var P=function(e){return Object(d.jsx)("div",{className:"page__content",children:e.children})},I={success:{link:n.p+"static/media/success.946ca54e.svg",text:"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!"},fail:{link:n.p+"static/media/fail.caca820d.svg",text:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437."}},R=new(function(){function e(t){Object(C.a)(this,e),this._url=t}return Object(y.a)(e,[{key:"register",value:function(e){var t=e.email,n=e.password;return fetch("".concat(this._url,"/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:n})})}},{key:"authorize",value:function(e){var t=e.email,n=e.password;return fetch("".concat(this._url,"/signin"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:n})})}},{key:"getContent",value:function(e){return fetch("".concat(this._url,"/users/me"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}})}}]),e}())("https://auth.nomoreparties.co");var A=function(){var e=Object(a.useState)(!1),t=Object(u.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(!1),i=Object(u.a)(s,2),p=i[0],_=i[1],m=Object(a.useState)(!1),x=Object(u.a)(m,2),C=x[0],y=x[1],w=Object(a.useState)({}),E=Object(u.a)(w,2),A=E[0],z=E[1],q=Object(a.useState)(null),J=Object(u.a)(q,2),M=J[0],F=J[1],B=o.a.useState([]),H=Object(u.a)(B,2),V=H[0],G=H[1],K=o.a.useState(!1),Q=Object(u.a)(K,2),W=Q[0],X=Q[1],Y=Object(a.useState)(!1),Z=Object(u.a)(Y,2),$=Z[0],ee=Z[1],te=Object(a.useState)({}),ne=Object(u.a)(te,2),ae=ne[0],oe=ne[1],ce=Object(a.useState)(!1),se=Object(u.a)(ce,2),ie=se[0],re=se[1],ue=Object(a.useState)(null),le=Object(u.a)(ue,2),pe=le[0],de=le[1],_e=Object(a.useState)(null),be=Object(u.a)(_e,2),je=be[0],me=be[1],he=Object(l.g)(),fe=Object(a.useState)(!1),Oe=Object(u.a)(fe,2),xe=Oe[0],ge=Oe[1];function ve(){y(!1),c(!1),_(!1),ee(!1),z({}),re(!1),me(null)}return Object(a.useEffect)((function(){S.getUserInfo().then((function(e){F(e)})).catch((function(e){console.log(e)}))}),[]),Object(a.useEffect)((function(){S.getInitialCards().then((function(e){G(e)})).catch((function(e){console.log(e)}))}),[]),Object(a.useEffect)((function(){function e(e){"Escape"===e.key&&ve()}return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]),Object(a.useEffect)((function(){!function(){var e=localStorage.getItem("token");e&&R.getContent(e).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))})).then((function(e){e.data&&(de(e.data),ge(!0),he.push("/"))})).catch((function(e){return console.log(e)}))}()}),[]),Object(d.jsx)(j.Provider,{value:M,children:Object(d.jsxs)("div",{className:"page",children:[Object(d.jsxs)(l.d,{children:[Object(d.jsx)(l.b,{path:"/signin",children:Object(d.jsxs)(P,{children:[Object(d.jsx)(b,{linkUrl:"signup",linkName:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(d.jsx)(D,{title:"\u0412\u0445\u043e\u0434",name:"login",buttonText:"\u0412\u043e\u0439\u0442\u0438",onLogin:function(e){R.authorize(e).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))})).then((function(t){t.token&&(localStorage.setItem("token",t.token),de(e),ge(!0),he.push("/"))})).catch((function(e){return console.log(e)}))}})]})}),Object(d.jsx)(l.b,{path:"/signup",children:Object(d.jsxs)(P,{children:[Object(d.jsx)(b,{linkUrl:"signin",linkName:"\u0412\u043e\u0439\u0442\u0438"}),Object(d.jsx)(T,{title:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",name:"register",buttonText:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",onRegister:function(e){R.register(e).then((function(e){return e.ok?(me(I.success),re(!0),he.push("/signin"),e.json()):(me(I.fail),re(!0),Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status)))})).catch((function(e){return console.log(e)}))}})]})}),Object(d.jsx)(U,{path:"/",loggedIn:xe,component:P,onEditProfile:function(){c(!0)},onAddPlace:function(){_(!0)},onEditAvatar:function(){y(!0)},onShowImage:function(e){z(e)},cards:V,onCardLike:function(e){var t=e.likes,n=t.some((function(e){return e._id===M._id}));n||t.push(M),S.changeLikeCardStatus(e._id,!n,t).then((function(t){G((function(n){return n.map((function(n){return n._id===e._id?t:n}))}))})).catch((function(e){console.log(e)}))},onConfirm:function(e){ee(!0),oe(e)},headerComponent:b,mainComponent:h,footerComponent:f,userData:pe,linkUrl:"signin",linkName:"\u0412\u044b\u0439\u0442\u0438",classLink:"header__link_type_logout",onSignOut:function(){xe&&(localStorage.removeItem("token"),ge(!1),de(null))}})]}),Object(d.jsx)(L,{isOpen:ie,onClose:ve,statusData:je}),Object(d.jsx)(g,{isOpen:n,onClose:ve,onUpdateUser:function(e){X(!0),S.setUserInfo(e).then((function(e){X(!1),F(e),ve()})).catch((function(e){console.log(e)}))},buttonText:W?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(d.jsx)(k,{isOpen:p,onClose:ve,onAddPlace:function(e){X(!0),S.addCard(e).then((function(e){X(!1),G([e].concat(Object(r.a)(V))),ve()})).catch((function(e){console.log(e)}))},buttonText:W?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"}),Object(d.jsx)(v,{isOpen:C,onClose:ve,onUpdateAvatar:function(e){X(!0),S.setUserAvatar(e.avatar).then((function(e){X(!1),F(e),ve()})).catch((function(e){console.log(e)}))},buttonText:W?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"}),Object(d.jsx)(N,{isOpen:$,onClose:ve,onCardDelete:function(e){S.deleteCard(e._id).then((function(t){G((function(t){return t.filter((function(t){return t._id!==e._id}))})),ve()})).catch((function(e){console.log(e)}))},card:ae,buttonText:"\u0414\u0430"}),Object(d.jsx)(O,{card:A,onClose:ve})]})})},z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,37)).then((function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),o(e),c(e),s(e)}))};s.a.render(Object(d.jsx)(o.a.StrictMode,{children:Object(d.jsx)(i.a,{children:Object(d.jsx)(A,{})})}),document.getElementById("root")),z()}},[[36,1,2]]]);
//# sourceMappingURL=main.883ca004.chunk.js.map